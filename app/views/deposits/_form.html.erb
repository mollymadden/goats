<%= form_with(model: deposit, local: true) do |form| %>

  <p>
  <strong>Listing Title:</strong>
  <%= @listing.title %>
  </p>

    <p>
  <strong>Breed:</strong>
  <%= @listing.breed %> Goat
  </p>

  <p>
    <strong>Price per day:</strong>
    $<%= @listing.price %>
  </p>

  <div class="field">
    <%=hidden_field_tag :user, current_user %>
  </div>

  <div class="field">
    <strong><%= form.label :address %>:</strong>
    <%= form.text_field :address %>
  </div>

  <p><strong>Confirmation Email Address:</strong> <%= current_user.email %></p>

  <div class="field">
    <%=hidden_field_tag :listing_id, params[:listing_id] %>
  </div>

  <div>
    <%= form.submit class: "btn btn-info btn-sm"%>
  </div>

    <script src="https://js.stripe.com/v3/"></script>

    <script>
    document
        .querySelector("[data-stripe='payment']")
        .addEventListener("click", () => {
        const stripe = Stripe(
            "<%= Rails.application.credentials.dig(:stripe, :public_key) %>"
        );

        stripe.redirectToCheckout({
            sessionId: "<%= @session_id %>"
        });
        });
    </script>


  <% end %>


